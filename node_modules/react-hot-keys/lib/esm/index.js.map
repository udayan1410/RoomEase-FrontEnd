{"version":3,"sources":["../../src/index.tsx"],"names":["React","PropTypes","Hotkeys","ReactHotkeys","props","isKeyDown","handle","onKeyDown","bind","onKeyUp","handleKeyUpEvent","filter","splitKey","unbind","keyName","document","body","addEventListener","removeEventListener","e","disabled","shortcut","allowRepeat","indexOf","children","Component","defaultProps","event","target","srcElement","tagName","isContentEditable","propTypes","string","func","bool"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Hotkeys, { HotkeysEvent } from 'hotkeys-js';\n\nexport type OnKeyFun = (shortcut: string, evn: KeyboardEvent, handle: HotkeysEvent) => void;\n\nexport interface IReactHotkeysProps {\n  keyName?: string;\n  filter?: (event: KeyboardEvent) => boolean;\n  onKeyUp?: OnKeyFun;\n  onKeyDown?: OnKeyFun;\n  allowRepeat?: boolean;\n  disabled?: boolean;\n  splitKey?: string;\n}\n\nexport default class ReactHotkeys extends React.Component<IReactHotkeysProps> {\n  public static defaultProps: IReactHotkeysProps = {\n    filter(event: KeyboardEvent) {\n      const target = (event.target as HTMLElement) || event.srcElement;\n      var tagName = target.tagName;\n      return !(target.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA');\n    },\n  }\n  static propTypes = {\n    keyName: PropTypes.string,\n    filter: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onKeyUp: PropTypes.func,\n    disabled: PropTypes.bool,\n    splitKey: PropTypes.string\n  }\n  private isKeyDown: boolean = false;\n  private handle: HotkeysEvent;\n  constructor(props: IReactHotkeysProps) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    this.handleKeyUpEvent = this.handleKeyUpEvent.bind(this);\n    this.handle = {} as HotkeysEvent;\n  }\n  componentDidMount() {\n    const { filter, splitKey } = this.props;\n    if (filter) {\n      Hotkeys.filter = filter;\n    }\n    Hotkeys.unbind(this.props.keyName as string);\n    Hotkeys(this.props.keyName as string, { splitKey }, this.onKeyDown);\n    document && document.body.addEventListener('keyup', this.handleKeyUpEvent);\n  }\n  componentWillUnmount() {\n    Hotkeys.unbind(this.props.keyName as string);\n    this.isKeyDown = true;\n    this.handle = {} as HotkeysEvent;\n    document && document.body.removeEventListener('keyup', this.handleKeyUpEvent);\n  }\n  onKeyUp(e: KeyboardEvent, handle: HotkeysEvent) {\n    const { onKeyUp, disabled } = this.props;\n    !disabled && onKeyUp && onKeyUp(handle.shortcut, e, handle)\n  }\n  onKeyDown(e: KeyboardEvent, handle: HotkeysEvent) {\n    const { onKeyDown, allowRepeat, disabled } = this.props;\n    if (this.isKeyDown && !allowRepeat) return;\n    this.isKeyDown = true;\n    this.handle = handle;\n    !disabled && onKeyDown && onKeyDown(handle.shortcut, e, handle)\n  }\n  handleKeyUpEvent(e: KeyboardEvent) {\n    if (!this.isKeyDown) return;\n    this.isKeyDown = false;\n    if (this.props.keyName && this.props.keyName.indexOf(this.handle.shortcut) < 0) return;\n    this.onKeyUp(e, this.handle);\n    this.handle = {} as HotkeysEvent;\n  }\n  render() {\n    return this.props.children || null;\n  }\n}\n"]}